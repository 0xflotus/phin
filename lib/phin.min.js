'use strict';function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),i=h.value}catch(j){return void d(j)}return h.done?void c(i):Promise.resolve(i).then(function(j){e('next',j)},function(j){e('throw',j)})}return e('next')})}}var _require=require('url');const URL=_require.URL,centra=require('centra'),phin=(()=>{var a=_asyncToGenerator(function*(b){if('string'!=typeof b&&!b.hasOwnProperty('url'))throw new Error('Missing url option from options for request method.');const c=centra('object'==typeof b?b.url:b,b.method||'GET');b.headers&&c.header(b.headers),b.stream&&c.stream(),b.timeout&&c.timeout(b.timeout),b.data&&c.body(b.data),b.form&&c.body(b.form,'form');const d=yield c.send();return d.headers.hasOwnProperty('location')&&b.followRedirects?(b.url=new URL(d.headers.location,b.url).toString(),yield phin(b)):b.stream?(d.stream=d,d):(d.coreRes.body=d.body,b.parse&&'json'===b.parse?(d.coreRes.body=yield d.json(),d.coreRes):d.coreRes)});return function(){return a.apply(this,arguments)}})();phin.promisified=phin,phin.unpromisified=(a,b)=>{phin(a).then(c=>{b&&b(null,c)}).catch(c=>{b&&b(c,null)})},module.exports=phin;